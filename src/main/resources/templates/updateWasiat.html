<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Update Wasiat</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top"
      th:fragment="header"
    >
      <div class="container-fluid">
        <a class="navbar-brand" th:href="@{/}">Estate Management System</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>
    </nav>
    <br />
    <br />
    <br />

    <div class="container">
      <div class="row">
        <div class="col-md-6 offset-md-3">
          <div class="card">
            <div class="card-header">
              <h3 class="text-center">Update Wasiat</h3>
            </div>
            <div class="card-body">
              <form
                th:action="@{/admin/update}"
                method="post"
                th:object="${wasiat}"
              >
                <div class="mb-3">
                  <input type="hidden" th:field="*{id}" />
                  <label class="control-label"
                    >User ID: <span th:text="*{user.id}"></span
                  ></label>
                </div>
                <div class="mb-3">
                  <label class="control-label"
                    >User Name: <span th:text="*{user.name}"></span
                  ></label>
                </div>

                <div class="mb-3">
                  <label class="control-label"
                    >Jantina:
                    <select class="form-control" th:field="*{gender}">
                      <option value="male">Male</option>
                      <option value="female">Female</option>
                    </select>
                  </label>
                </div>
                <div class="mb-3">
                  <label class="control-label"
                    >Isteri:
                    <select class="form-control" th:field="*{isteri}">
                      <option value="">pilih</option>
                      <option value="tiada">tiada</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                    </select>
                  </label>
                </div>

                <div class="mb-3">
                  <label class="control-label"
                    >Suami:
                    <select class="form-control" th:field="*{suami}">
                      <option value="">pilih</option>
                      <option value="tiada">Tiada</option>
                      <option value="ada">Ada</option>
                    </select>
                  </label>
                </div>

                <div class="mb-3">
                  <label class="control-label"
                    >Anak Lelaki:
                    <select class="form-control" th:field="*{anakLelaki}">
                      <option value="">pilih</option>
                      <option value="tiada">tiada</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                    </select>
                  </label>
                </div>

               
                <div id="sonNamesContainer">
                  <div
                    th:each="anakLelaki, iterStat : *{anakLelakiNames}"
                    class="sonEntry"
                  >
                  <label for="anakLelakiNames">Son Names:</label>
                    <input
                      type="text"
                      th:field="*{anakLelakiNames[__${iterStat.index}__].name}"
                      placeholder="Name"
                      class="form-control"
                    />
                    <label for="anakLelakiNames">No IC:</label>
                    <input
                      type="text"
                      th:field="*{anakLelakiNames[__${iterStat.index}__].ic}"
                      placeholder="ID Number"
                      class="form-control"
                    />
                    <label class="control-label"
                      >Adakah Anak OKU:
                      <select
                        class="form-control"
                        th:field="*{anakLelakiNames[__${iterStat.index}__].oku}"
                        placeholder="Status Anak Lelaki"
                      >
                        <option value="">pilih</option>
                        <option value="Ya">Ya</option>
                        <option value="Tidak">Tidak</option>
                      </select>
                    </label>
                    <button type="button" onclick="removeSonNameField(this)">
                      Remove
                    </button>
                  </div>
                </div>

                <button type="button" onclick="addSonNameField()">
                  Add Son Name
                </button>

                <div class="mb-3">
                  <label class="control-label"
                    >Anak Perempuan:
                    <select class="form-control" th:field="*{anakPerempuan}">
                      <option value="">pilih</option>
                      <option value="tiada">tiada</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                    </select>
                  </label>
                </div>

                <div class="mb-3">
                  <label class="control-label"
                    >Anak Angkat:
                    <select class="form-control" th:field="*{anakAngkat}">
                      <option value="">pilih</option>
                      <option value="tiada">tiada</option>
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                      <option value="4">4</option>
                      <option value="5">5</option>
                      <option value="6">6</option>
                      <option value="7">7</option>
                      <option value="8">8</option>
                      <option value="9">9</option>
                      <option value="10">10</option>
                      <option value="11">11</option>
                      <option value="12">12</option>
                    </select>
                  </label>
                </div>
                <div class="mb-3">
                  <label class="control-label"
                    >Status Anak Bawah Atau OKU (ADA/TIADA):
                    <select class="form-control" th:field="*{confirmation}">
                      <option value="">pilih</option>
                      <option value="ada">ada</option>
                      <option value="tiada">tiada</option>
                    </select>
                  </label>
                </div>
                <div class="mb-3">
                  <label class="control-label"
                    >Jumlah Perbelanjaan Keluarga Setiap Bulan:
                    <input
                      class="form-control"
                      type="number"
                      th:field="*{perbelanjaan}"
                    />
                  </label>
                </div>
                <div class="mb-3">
                  <label class="control-label"
                    >Anggaran Nilai Harta:
                    <select class="form-control" th:field="*{anggaran}">
                      <option value="">pilih</option>
                      <option value="kurang">Kurang dari RM2 juta</option>
                      <option value="lebih">Lebih dari RM2 juta</option>
                    </select>
                  </label>
                </div>
                <div class="mb-3">
                  <label class="control-label"
                    >Status Hibah (Ya/Tidak):
                    <select class="form-control" th:field="*{hibah}">
                      <option value="ya">Ya</option>
                      <option value="tidak">Tidak</option>
                    </select>
                  </label>
                </div>
                <div class="mb-3">
                  <button type="submit" class="btn btn-primary">Save</button>
                </div>
              </form>

              <script th:inline="javascript">
                var sonCount = /*[[${wasiat.anakLelakiNames.size()}]]*/ 0;

                function addSonNameField() {
                  var sonNamesContainer =
                    document.getElementById("sonNamesContainer");
                  var newSonEntry = document.createElement("div");
                  newSonEntry.className = "sonEntry";

                  var newNameInput = document.createElement("input");
                  newNameInput.type = "text";
                  newNameInput.name = "anakLelakiNames[" + sonCount + "].name";
                  newNameInput.placeholder = "Name";

                  var newIdNumberInput = document.createElement("input");
                  newIdNumberInput.type = "text";
                  newIdNumberInput.name =
                    "anakLelakiNames[" + sonCount + "].ic";
                  newIdNumberInput.placeholder = "ID Number";

                  var newStatusSelect = document.createElement("select");
                  newStatusSelect.name =
                    "anakLelakiNames[" + sonCount + "].oku";

                  // Add options to the select element
                  var activeOption = document.createElement("option");
                  activeOption.value = "YA";
                  activeOption.text = "Ya";

                  var inactiveOption = document.createElement("option");
                  inactiveOption.value = "TIDAK";
                  inactiveOption.text = "Tidak";

                  // Add more options as needed

                  newStatusSelect.appendChild(activeOption);
                  newStatusSelect.appendChild(inactiveOption);

                  var removeButton = document.createElement("button");
                  removeButton.type = "button";
                  removeButton.textContent = "Remove";
                  removeButton.onclick = function () {
                    sonNamesContainer.removeChild(newSonEntry);
                  };

                  newSonEntry.appendChild(newNameInput);
                  newSonEntry.appendChild(newIdNumberInput);
                  newSonEntry.appendChild(newStatusSelect);
                  newSonEntry.appendChild(removeButton);

                  sonNamesContainer.appendChild(newSonEntry);

                  sonCount++;
                }

                function removeSonNameField(button) {
                  var sonNamesContainer =
                    document.getElementById("sonNamesContainer");
                  var sonEntryToRemove = button.parentElement;
                  sonNamesContainer.removeChild(sonEntryToRemove);
                }
              </script>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
